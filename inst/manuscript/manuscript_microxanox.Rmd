---
title: "m0.0.1: Microxanox - ..."
author:
- name: Rainer M Krug
  email: Rainer.Krug@uzh.ch & Rainer@krugs.de
  affiliation: University of Zürich
  footnote: Corresponding Author
- name: Owen L. Petchey
  email: Owen.Petchey@ieu.uzh.ch
  affiliation: University of Zürich
address:
- code: University of Zürich
  address: Department of Evolutionary Biology and Environmental Studies, Winterthurerstrasse
    190, 8057 Zurich
keywords: metadata quality; data curation; archival; long term storage; R package;
abstract: |
  1. set the context for and purpose of the work;
  2. indicate the approach and methods;
  3. outline the main results;
  4. identify the conclusions and the wider implications.
journal: 'Ecology and Evolution - Applications'
bibliography: manuscript_bibliography.bib
date: "`r Sys.time()`"
output:
  html_document:
    toc: true
    toc_float: true
  pdf_document:
    keep_tex: yes
header-includes:
- \usepackage{lineno}
- \linenumbers
- \usepackage{setspace}
- \doublespacing
- \usepackage{fancyhdr}
- \fancyhead{}
- \fancyfoot{}
- \fancyhead[CO,CE]{Metadata made easy - the dmdScheme approach}
- \pagestyle{fancy}

nocite: '@Bush2017'
linkcolor: blue
link-citations: yes
csl: methods-in-ecology-and-evolution.csl
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(microxanox)
```
  
# Journal Guidelines
  - Abstract < 350 words
  - Article 3000-4000 words

# Introduction

{>> Biological justification and background <<}

The aims of the `microxanox` package are twofold. Firstly, the package aims at reproducing the results shown by [@Bush2017]. To take one step further, it includes new functionality to adress our research question as presented in [@REF_NEEDED].

In addition to the model itself, the package includes some functions to analyse the results as well as visualise the results to provide a starting point for customised visualisations based on own requirements.

# The Model

The model is an implementation of the model described by [@Bush2017]. It is an ordinary differential equation (ODE) based numerical non-stochastic model which was implemented in form of an R package.

We extended the model and added functionality for:

- Multiple strains per functional group.
- Adding temporally varying oxygen diffusivity.
- Adding random noise in substrate concentrations.
- Including immigration.
- Setting minimum population abundances.


We will go through these additions in detail below.

We use the notation from the [Table S1](LINK NEEDED) of the Supplementary information of [@Bush2017]), and not the notation in the main manuscript of [@Bush2017]. In the main manuscript the notation is simplified to `y_S_PB` ($y_{S,PB}$) (which is `y_SR_PB` ($y_{SR,PB}$) in Table S1) and `y_S_SB` ($y_{S,SB}$) (which is y_SO_SB ($y_{SO,SB}$) in Table S1). We also use `Pr_cB` ($Pr_B$) instead of `P_CB` ($P_{CB}$).

All parameter and variables follow these base dimensions:

- Time: `hours`
- Volume: `litres`
- Substrate quantity: `micromoles`
- Organism quantity: `cells`

{>> Add a more detailed description of the model and the additions <<}

The ODEs are solved using the "General Solver for Ordinary Differential Equations" of the odeSolve package [@REF_NEEDED]

## The ODEs
The ODEs for the rates of change are specified in the function `bushplus_dynamic_model()`. This augmented version of the model published in [@Bush2017] can handle multiple strains within each of the three functional groups, temporal variation in oxygen diffusivity, and events.
	

# Availability and Accessability of the Package
The package is available in a [github repo/](https://github.com/UZH-PEG/microxanox/). The newest version is also available under the [DOI](https://DOI) or via RUniverse [@REF_NEEDED]. This manuscript describes version 1.0 which is available under [DOI](https://DOI) or installable within R by using `remotes::install_github("UZH-PEG", ref = "v1.0")`. 

The package will be updated based on further research activities. It will be tested continuously for the last revent, current and devel version of R.
Issues, questions and suggestions should be communicated through the issue tracker at [https://github.com/UZH-PEG/microxanox/issues](https://github.com/UZH-PEG/microxanox/issues) 


# Usage of the Package
The package includes a full documentetion, which includes

1. Standard R help for each function (`?COMMAND` in R)
2. Two vignettes acompanying the paclage, also available under RUniverse [Vignette 1](LINK NEEDED)
3. This paper as a third vignette, also available under RUniverse [Vignette 1](LINK NEEDED)

## Simulation Preparation
1. Define a parameter set of class `runsim_parameter` (i.e. parameters and initial conditions) by using the functions `new_runsim_parameter()`, `new_initial_state()` and `new_strain_parameter()`.

- Set parameter
	- `new_xxx_parameter()`

## Simulation steps
2. The function call `run_simulation(parameter)` which will run a simulation using the parameter as defined in the object `parameter`.


- single simulation `run_simulation()`
- Stable State Finding 
	- Replication Method `run_replication_ssfind()`
	- Temporal Method `run_replication_ssfind()`
- {>>I would leave the `run_temporal_experiment()` out as it has no counterpart for the replication method <<}

## Analysis and Graphing

{>> Have to add these aspects here <<}



# Use cases
This package has been used in the production of the paper [@REF_NEEDED]. It can be used for similar studies in this study systems. It is not intended to provide a modelling framework which can be adjusted easily to all needs, but primarily a tool to implement the model used by [@Bush2017] and to extend it to our needs. Consequently, any more substantial, are likely to need a change in the source code.
Nevertheless, the model is structured in a way which builds on a udular structuere, so that e.g. the event defuinition can easily be changed.

# Conclusions


# References
